<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Vouchers - GameVoucher</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            }
    
            body {
                background-color: #0f1923;
                color: #ffffff;
                line-height: 1.6;
                -webkit-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
    
            .dashboard-container {
                display: flex;
                min-height: 100vh;
            }
    
            /* Sidebar Styles */
            .sidebar {
                width: 250px;
                background-color: #162635;
                padding: 20px 0;
                position: fixed;
                height: 100vh;
                overflow-y: auto;
            }
    
            .sidebar-header {
                padding: 0 20px 20px;
                border-bottom: 1px solid #2a3a4a;
            }
    
            .logo {
                font-size: 24px;
                font-weight: 700;
                color: #00e5ff;
                text-decoration: none;
                display: block;
                margin-bottom: 5px;
            }
    
            .logo span {
                color: #ff3e78;
            }
    
            .user-info {
                display: flex;
                align-items: center;
                margin-top: 20px;
            }
    
            .user-avatar {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                background-color: #2a3a4a;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-right: 10px;
                font-weight: bold;
                color: #00e5ff;
            }
    
            .user-details {
                font-size: 14px;
            }
    
            .user-name {
                font-weight: 600;
            }
    
            .user-plan {
                color: #00e5ff;
                font-size: 12px;
            }
    
            .sidebar-menu {
                padding: 20px 0;
            }
    
            .menu-item {
                padding: 12px 20px;
                display: flex;
                align-items: center;
                color: #a0aec0;
                text-decoration: none;
                transition: all 0.3s;
            }
    
            .menu-item.active,
            .menu-item:hover {
                background-color: #1a2c3d;
                color: #ffffff;
                border-left: 4px solid #00e5ff;
            }
    
            .menu-item i {
                margin-right: 10px;
                font-size: 18px;
            }
    
            /* Main Content Styles */
            .main-content {
                flex: 1;
                padding: 30px;
                margin-left: 250px;
            }
    
            .dashboard-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 30px;
            }
    
            .page-title {
                font-size: 24px;
                font-weight: 700;
            }
    
            .header-actions {
                display: flex;
                gap: 15px;
            }
    
            .btn {
                padding: 10px 15px;
                border-radius: 5px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s;
                text-decoration: none;
                display: inline-flex;
                align-items: center;
                border: none;
            }
    
            .btn i {
                margin-right: 8px;
            }
    
            .btn-primary {
                background-color: #00e5ff;
                color: #0f1923;
            }
    
            .btn-primary:hover {
                background-color: #00c2e0;
            }
    
            .btn-outline {
                background-color: transparent;
                color: #ffffff;
                border: 1px solid #2a3a4a;
            }
    
            .btn-outline:hover {
                background-color: rgba(255, 255, 255, 0.05);
            }
    
            .card {
                background-color: #1a2a38;
                border-radius: 10px;
                padding: 20px;
                margin-bottom: 30px;
            }
    
            .card-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
            }
    
            .card-title {
                font-size: 18px;
                font-weight: 600;
            }
    
            .card-action {
                color: #00e5ff;
                text-decoration: none;
                font-size: 14px;
            }
    
            .card-action:hover {
                text-decoration: underline;
            }
    
            /* Voucher Specific Styles */
            .voucher-tabs {
                display: flex;
                margin-bottom: 20px;
                border-bottom: 1px solid #2a3a4a;
            }
    
            .voucher-tab {
                padding: 12px 20px;
                cursor: pointer;
                font-weight: 600;
                border-bottom: 3px solid transparent;
                transition: all 0.3s;
            }
    
            .voucher-tab.active {
                color: #00e5ff;
                border-bottom-color: #00e5ff;
            }
    
            .voucher-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
    
            .voucher-card {
                background-color: #162534;
                border-radius: 10px;
                overflow: hidden;
                transition: transform 0.3s;
                position: relative;
            }
    
            .voucher-card:hover {
                transform: translateY(-5px);
            }
    
            .voucher-header {
                height: 80px;
                background: linear-gradient(135deg, #00e5ff 0%, #0097b2 100%);
                display: flex;
                align-items: center;
                justify-content: center;
                color: #0f1923;
                font-weight: 700;
                font-size: 20px;
            }
    
            .netflix-header {
                background: linear-gradient(135deg, #e50914 0%, #b81d24 100%);
                color: white;
            }
    
            .amazon-header {
                background: linear-gradient(135deg, #ff9900 0%, #e68a00 100%);
                color: #0f1923;
            }
    
            .spotify-header {
                background: linear-gradient(135deg, #1db954 0%, #168d40 100%);
                color: white;
            }
    
            .uber-header {
                background: linear-gradient(135deg, #000000 0%, #333333 100%);
                color: white;
            }
    
            .steam-header {
                background: linear-gradient(135deg, #171a21 0%, #1a3c5a 100%);
                color: white;
            }
    
            .starbucks-header {
                background: linear-gradient(135deg, #00704a 0%, #005738 100%);
                color: white;
            }
    
            .voucher-body {
                padding: 20px;
            }
    
            .voucher-value {
                font-size: 28px;
                font-weight: 700;
                margin-bottom: 10px;
                display: flex;
                align-items: center;
            }
    
            .voucher-value i {
                margin-right: 10px;
                color: #00e5ff;
            }
    
            .voucher-description {
                color: #a0aec0;
                margin-bottom: 15px;
                font-size: 14px;
                min-height: 60px;
            }
    
            .voucher-meta {
                display: flex;
                justify-content: space-between;
                border-top: 1px solid #2a3a4a;
                padding-top: 15px;
                font-size: 12px;
                color: #a0aec0;
            }
    
            .voucher-history {
                margin-top: 30px;
            }
    
            .voucher-table {
                width: 100%;
                border-collapse: collapse;
            }
    
            .voucher-table th {
                background-color: #162534;
                text-align: left;
                padding: 12px 15px;
                font-weight: 600;
                color: #a0aec0;
            }
    
            .voucher-table td {
                padding: 15px;
                border-bottom: 1px solid #2a3a4a;
            }
    
            .status-badge {
                display: inline-block;
                padding: 5px 10px;
                border-radius: 20px;
                font-size: 12px;
                font-weight: 600;
            }
    
            .status-active {
                background-color: rgba(0, 229, 255, 0.1);
                color: #00e5ff;
            }
    
            .status-expired {
                background-color: rgba(255, 62, 120, 0.1);
                color: #ff3e78;
            }
    
            .status-redeemed {
                background-color: rgba(87, 180, 87, 0.1);
                color: #57b457;
            }
    
            .voucher-badge {
                position: absolute;
                top: 10px;
                right: 10px;
                background-color: #ff3e78;
                color: white;
                padding: 5px 10px;
                border-radius: 20px;
                font-size: 12px;
                font-weight: 600;
            }
    
            .market-card {
                display: flex;
                background-color: #162534;
                border-radius: 10px;
                overflow: hidden;
                margin-bottom: 15px;
                transition: transform 0.3s;
            }
    
            .market-card:hover {
                transform: translateX(5px);
            }
    
            .market-icon {
                width: 80px;
                display: flex;
                align-items: center;
                justify-content: center;
                background-color: #1a2c3d;
                color: #00e5ff;
                font-size: 25px;
            }
    
            .market-details {
                flex: 1;
                padding: 15px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
    
            .market-info h3 {
                font-weight: 600;
                margin-bottom: 5px;
            }
    
            .market-info p {
                color: #a0aec0;
                font-size: 13px;
            }
    
            .market-action {
                display: flex;
                align-items: center;
            }
    
            .market-price {
                background-color: rgba(0, 229, 255, 0.1);
                color: #00e5ff;
                padding: 5px 10px;
                border-radius: 5px;
                font-weight: 600;
                margin-right: 15px;
            }
    
            .progress-bar {
                height: 5px;
                background-color: #162534;
                border-radius: 5px;
                overflow: hidden;
                margin-top: 15px;
            }
    
            .progress {
                height: 100%;
                background-color: #00e5ff;
                width: 65%;
            }
    
            @media (max-width: 992px) {
                .voucher-grid {
                    grid-template-columns: repeat(2, 1fr);
                }
            }
    
            @media (max-width: 768px) {
                .sidebar {
                    width: 70px;
                    padding: 15px 0;
                }
    
                .logo {
                    font-size: 20px;
                    text-align: center;
                }
    
                .sidebar-header {
                    padding: 0 10px 15px;
                }
    
                .user-info,
                .logo span,
                .user-details,
                .menu-item span {
                    display: none;
                }
    
                .menu-item {
                    justify-content: center;
                    padding: 15px 0;
                }
    
                .menu-item i {
                    margin-right: 0;
                    font-size: 20px;
                }
    
                .main-content {
                    margin-left: 70px;
                    padding: 20px;
                }
            }
    
                        @media (max-width: 576px) {
                .voucher-grid {
                    grid-template-columns: 1fr;
                }

                .dashboard-header {
                    flex-direction: column;
                    align-items: flex-start;
                    gap: 15px;
                }

                .voucher-tabs {
                    overflow-x: auto;
                    white-space: nowrap;
                    width: 100%;
                }
            }

            /* Modal Styles */
            .modal {
                display: none;
                position: fixed;
                z-index: 1000;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.8);
                backdrop-filter: blur(5px);
            }

            .modal-content {
                background-color: #1a2a38;
                margin: 10% auto;
                padding: 0;
                border-radius: 15px;
                width: 90%;
                max-width: 500px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
                animation: modalSlideIn 0.3s ease-out;
            }

            @keyframes modalSlideIn {
                from {
                    opacity: 0;
                    transform: translateY(-50px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .modal-header {
                background: linear-gradient(135deg, #00e5ff 0%, #0097b2 100%);
                color: #0f1923;
                padding: 20px;
                border-radius: 15px 15px 0 0;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .modal-title {
                font-size: 20px;
                font-weight: 700;
                margin: 0;
            }

            .close {
                color: #0f1923;
                font-size: 28px;
                font-weight: bold;
                cursor: pointer;
                transition: opacity 0.3s;
            }

            .close:hover {
                opacity: 0.7;
            }

            .modal-body {
                padding: 30px;
                text-align: center;
            }

            .voucher-code-container {
                background-color: #162534;
                border: 2px dashed #00e5ff;
                border-radius: 10px;
                padding: 20px;
                margin: 20px 0;
                position: relative;
            }

            .voucher-code {
                font-family: 'Courier New', monospace;
                font-size: 24px;
                font-weight: bold;
                color: #00e5ff;
                letter-spacing: 2px;
                margin: 0;
                word-break: break-all;
            }

            .copy-btn {
                background-color: #00e5ff;
                color: #0f1923;
                border: none;
                padding: 12px 25px;
                border-radius: 8px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s;
                margin-top: 15px;
                display: inline-flex;
                align-items: center;
                gap: 8px;
            }

            .copy-btn:hover {
                background-color: #00c2e0;
                transform: translateY(-2px);
            }

            .copy-btn.copied {
                background-color: #57b457;
            }

            .modal-footer {
                padding: 20px 30px;
                border-top: 1px solid #2a3a4a;
                text-align: center;
            }

            .modal-info {
                color: #a0aec0;
                font-size: 14px;
                margin-bottom: 15px;
            }

            .modal-close-btn {
                background-color: transparent;
                color: #a0aec0;
                border: 1px solid #2a3a4a;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                transition: all 0.3s;
            }

            .modal-close-btn:hover {
                background-color: rgba(255, 255, 255, 0.05);
                color: #ffffff;
            }
        </style>
        <!-- Font Awesome for icons -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    </head>
    
    <body>
        <div class="dashboard-container">
            <!-- Sidebar Navigation -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <a href="#" class="logo">Game<span>Voucher</span></a>
                    <div class="user-info">
                        <div class="user-avatar" id="userInitials">JS</div>
                        <div class="user-details">
                            <div class="user-name" id="userName">John Smith</div>
                            <div class="user-plan" id="userPlan">Premium Plan</div>
                        </div>
                    </div>
                </div>
    
                <nav class="sidebar-menu">
                    <a href="dashboard.html" class="menu-item">
                        <i class="fas fa-home"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="games.html" class="menu-item">
                        <i class="fas fa-gamepad"></i>
                        <span>Games</span>
                    </a>
                    <a href="Reward.html" class="menu-item">
                        <i class="fas fa-gift"></i>
                        <span>Voucher Marketplace</span>
                    </a>
                    <a href="vouchers.html" class="menu-item active">
                        <i class="fas fa-ticket-alt"></i>
                        <span>My Vouchers</span>
                    </a>
                    <a href="leaderboard.html" class="menu-item">
                        <i class="fas fa-trophy"></i>
                        <span>Leaderboard</span>
                    </a>
                    <a href="history.html" class="menu-item">
                        <i class="fas fa-history"></i>
                        <span>History</span>
                    </a>
                    <a href="setting.html" class="menu-item">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                    <a href="index.html" class="menu-item" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </a>
                </nav>
            </aside>
    
            <!-- Main Dashboard Content -->
            <main class="main-content">
                <div class="dashboard-header">
                    <h1 class="page-title">My Vouchers</h1>
                    <div class="header-actions">
                        <button class="btn btn-outline">
                            <i class="fas fa-coins"></i>
                            <span id="userCredits">0</span> Credits
                        </button>
                        <a href="Reward.html" class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            Get More Vouchers
                        </a>
                    </div>
                </div>
    
    
                                        <!-- My Vouchers Tab Content -->
                    <div class="voucher-grid" id="voucherGrid">
                        <!-- Vouchers will be dynamically loaded here -->
                    </div>
                    
                    <!-- Empty state message -->
                    <div id="emptyState" class="empty-state" style="display: none; text-align: center; padding: 60px 20px; color: #a0aec0;">
                        <i class="fas fa-ticket-alt" style="font-size: 64px; margin-bottom: 20px; opacity: 0.3;"></i>
                        <h3 style="margin-bottom: 10px; color: #ffffff;">No Vouchers Yet</h3>
                        <p style="margin-bottom: 30px;">You haven't purchased any vouchers yet. Visit the Voucher Marketplace to get started!</p>
                        <a href="Reward.html" class="btn btn-primary">
                            <i class="fas fa-shopping-cart"></i>
                            Browse Vouchers
                        </a>
                    </div>
                </div>
            </main>
        </div>

        <!-- Voucher Code Modal -->
        <div id="voucherModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">Voucher Code</h2>
                    <span class="close">&times;</span>
                </div>
                <div class="modal-body">
                    <p>Your voucher code is ready!</p>
                    <div class="voucher-code-container">
                        <p class="voucher-code" id="voucherCode">NETFLIX-2024-ABC123</p>
                    </div>
                    <button class="copy-btn" id="copyBtn">
                        <i class="fas fa-copy"></i>
                        Copy Code
                    </button>
                </div>
                <div class="modal-footer">
                    <p class="modal-info">Use this code at checkout to redeem your voucher</p>
                    <button class="modal-close-btn" id="modalCloseBtn">Close</button>
                </div>
            </div>
        </div>
    
        <script src="app.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                // Load and display user's vouchers
                loadUserVouchers();
                
                // Voucher codes for different services (fallback for demo)
                const voucherCodes = {
                    'netflix': 'NETFLIX-2024-ABC123',
                    'uber': 'UBER-2024-XYZ789',
                    'amazon': 'AMAZON-2024-DEF456',
                    'spotify': 'SPOTIFY-2024-GHI789',
                    'steam': 'STEAM-2024-JKL012',
                    'starbucks': 'STARBUCKS-2024-MNO345'
                };
                
                function loadUserVouchers() {
                    const userVouchers = JSON.parse(localStorage.getItem('userVouchers') || '[]');
                    const voucherGrid = document.getElementById('voucherGrid');
                    const emptyState = document.getElementById('emptyState');
                    
                    if (userVouchers.length === 0) {
                        voucherGrid.style.display = 'none';
                        emptyState.style.display = 'block';
                        return;
                    }
                    
                    voucherGrid.style.display = 'grid';
                    emptyState.style.display = 'none';
                    voucherGrid.innerHTML = '';
                    
                    userVouchers.forEach(voucher => {
                        const voucherCard = createVoucherCard(voucher);
                        voucherGrid.appendChild(voucherCard);
                    });
                }
                
                function createVoucherCard(voucher) {
                    const card = document.createElement('div');
                    card.className = 'voucher-card';
                    card.setAttribute('data-voucher-id', voucher.id);
                    
                    // Determine header style and icon based on voucher type
                    let headerClass = 'voucher-header';
                    let icon = 'fas fa-ticket-alt';
                    let serviceName = voucher.title.toUpperCase();
                    
                    switch(voucher.type) {
                        case 'netflix':
                            headerClass += ' netflix-header';
                            icon = 'fas fa-film';
                            serviceName = 'NETFLIX';
                            break;
                        case 'uber':
                            headerClass += ' uber-header';
                            icon = 'fas fa-utensils';
                            serviceName = 'UBEREATS';
                            break;
                        case 'amazon':
                            headerClass += ' amazon-header';
                            icon = 'fas fa-shopping-cart';
                            serviceName = 'AMAZON';
                            break;
                        case 'spotify':
                            headerClass += ' spotify-header';
                            icon = 'fas fa-music';
                            serviceName = 'SPOTIFY';
                            break;
                        case 'steam':
                            headerClass += ' steam-header';
                            icon = 'fas fa-gamepad';
                            serviceName = 'STEAM';
                            break;
                        case 'starbucks':
                            headerClass += ' starbucks-header';
                            icon = 'fas fa-coffee';
                            serviceName = 'STARBUCKS';
                            break;
                        default:
                            headerClass += ' voucher-header';
                            break;
                    }
                    
                    // Format expiration date
                    const expiresDate = new Date(voucher.expiresDate);
                    const formattedDate = expiresDate.toLocaleDateString('en-US', { 
                        month: 'short', 
                        day: 'numeric', 
                        year: 'numeric' 
                    });
                    
                    // Determine category tag
                    let categoryTag = 'General';
                    switch(voucher.type) {
                        case 'netflix':
                        case 'spotify':
                            categoryTag = 'Streaming';
                            break;
                        case 'uber':
                        case 'starbucks':
                            categoryTag = 'Food';
                            break;
                        case 'amazon':
                            categoryTag = 'Shopping';
                            break;
                        case 'steam':
                            categoryTag = 'Gaming';
                            break;
                    }
                    
                    card.innerHTML = `
                        <div class="${headerClass}">
                            <i class="${icon}"></i>&nbsp; ${serviceName}
                        </div>
                        <div class="voucher-body">
                            <div class="voucher-value">
                                <i class="fas fa-ticket-alt"></i> Voucher
                            </div>
                            <div class="voucher-description">
                                ${voucher.title}. Use this voucher code at checkout.
                            </div>
                            <button class="btn btn-primary" style="width: 100%;" data-voucher-code="${voucher.code}">Redeem</button>
                            <div class="voucher-meta">
                                <span><i class="far fa-calendar-alt"></i> Expires: ${formattedDate}</span>
                                <span><i class="fas fa-tag"></i> ${categoryTag}</span>
                            </div>
                        </div>
                    `;
                    
                    return card;
                }

                // Get modal elements
                const modal = document.getElementById('voucherModal');
                const voucherCodeElement = document.getElementById('voucherCode');
                const copyBtn = document.getElementById('copyBtn');
                const closeBtn = document.querySelector('.close');
                const modalCloseBtn = document.getElementById('modalCloseBtn');

                // Add click event listeners to redeem buttons (using event delegation for dynamic content)
                document.addEventListener('click', function(e) {
                    if (e.target.classList.contains('btn-primary') && e.target.textContent.trim() === 'Redeem') {
                        const voucherCode = e.target.getAttribute('data-voucher-code');
                        
                        if (voucherCode) {
                            // Set the voucher code from the data attribute
                            voucherCodeElement.textContent = voucherCode;
                            
                            // Show the modal
                            modal.style.display = 'block';
                        } else {
                            // Fallback for demo vouchers
                            const voucherCard = e.target.closest('.voucher-card');
                            let service = 'netflix'; // default
                            const header = voucherCard.querySelector('.voucher-header');
                            if (header) {
                                const headerText = header.textContent.toLowerCase();
                                if (headerText.includes('netflix')) service = 'netflix';
                                else if (headerText.includes('uber')) service = 'uber';
                                else if (headerText.includes('amazon')) service = 'amazon';
                                else if (headerText.includes('spotify')) service = 'spotify';
                                else if (headerText.includes('steam')) service = 'steam';
                                else if (headerText.includes('starbucks')) service = 'starbucks';
                            }
                            
                            // Set the voucher code
                            voucherCodeElement.textContent = voucherCodes[service];
                            
                            // Show the modal
                            modal.style.display = 'block';
                        }
                    }
                });

                // Copy functionality
                copyBtn.addEventListener('click', function() {
                    const code = voucherCodeElement.textContent;
                    
                    // Copy to clipboard
                    navigator.clipboard.writeText(code).then(function() {
                        // Update button to show copied state
                        const originalText = copyBtn.innerHTML;
                        copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                        copyBtn.classList.add('copied');
                        
                        // Reset after 2 seconds
                        setTimeout(function() {
                            copyBtn.innerHTML = originalText;
                            copyBtn.classList.remove('copied');
                        }, 2000);
                    }).catch(function(err) {
                        // Fallback for older browsers
                        const textArea = document.createElement('textarea');
                        textArea.value = code;
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                        
                        // Update button to show copied state
                        const originalText = copyBtn.innerHTML;
                        copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                        copyBtn.classList.add('copied');
                        
                        // Reset after 2 seconds
                        setTimeout(function() {
                            copyBtn.innerHTML = originalText;
                            copyBtn.classList.remove('copied');
                        }, 2000);
                    });
                });

                // Close modal functionality
                function closeModal() {
                    modal.style.display = 'none';
                }

                closeBtn.addEventListener('click', closeModal);
                modalCloseBtn.addEventListener('click', closeModal);

                // Close modal when clicking outside of it
                window.addEventListener('click', function(event) {
                    if (event.target === modal) {
                        closeModal();
                    }
                });

                // Close modal with Escape key
                document.addEventListener('keydown', function(event) {
                    if (event.key === 'Escape' && modal.style.display === 'block') {
                        closeModal();
                    }
                });
            });
        </script>
    </body>
    
</html>